console.log("✅ form.js chargé !"),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("contact-form"),t=document.getElementById("form-status");if(!e||!t)return;function s(){t.textContent="Envoyer le message",t.classList.remove("error-style","validation-style"),t.classList.add("primary-btn"),t.style.display="block",t.disabled=!1}function n(e){t.textContent=e,t.classList.remove("primary-btn","validation-style"),t.classList.add("error-style"),t.style.display="block",t.disabled=!1}window.onRecaptchaSuccess=function(){s()},window.onRecaptchaExpired=function(){s()},s(),e.addEventListener("submit",async function(a){a.preventDefault();try{const a=window.grecaptcha?window.grecaptcha.getResponse():"";if(!a)return void n("Merci de valider le reCAPTCHA.");const r={nom:e.nom.value,entreprise:e.entreprise.value,email:e.email.value,tel:e.tel.value,sujet:e.sujet.value,message:e.message.value,consentement:e.consentement.checked,website:e.website?e.website.value:"",recaptcha:a};t.textContent="Envoi en cours…",t.classList.remove("validation-style","error-style"),t.classList.add("primary-btn"),t.disabled=!0;const i=await fetch("/.netlify/functions/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),c=await i.json().catch(()=>({}));if(!i.ok||!c.ok)throw new Error(c.error||`HTTP ${i.status}`);o="Message envoyé avec succès !",t.textContent=o,t.classList.remove("primary-btn","error-style"),t.classList.add("validation-style"),t.style.display="block",t.disabled=!1,e.reset(),window.grecaptcha&&window.grecaptcha.reset(),setTimeout(()=>{s()},8e3)}catch(e){console.error(e),n("Erreur d'envoi : "+(e?.message||"inconnue"))}var o})});