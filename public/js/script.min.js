document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".fixed-btn .fixed-mail"),t=document.querySelector(".fixed-btn .fixed-home"),o=document.querySelector(".floating-nav"),n=document.querySelector("#hero");function i(e){return e.getBoundingClientRect().top+window.pageYOffset}function r(){const r=window.pageYOffset,s=r+window.innerHeight,d=n?n.getBoundingClientRect().bottom+window.pageYOffset:300,a=document.querySelector("#contact"),c=document.querySelector("#footer"),l=!!a&&s>=i(a),u=!!c&&s>=i(c),w=r>d&&!u,p=r>d&&!l;e.classList.toggle("fixed-hidden",!p),t.classList.toggle("fixed-hidden",!w),o.classList.toggle("fixed-hidden",!w)}window.addEventListener("scroll",r),window.addEventListener("resize",r);const s=document.querySelectorAll(".number"),d=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&((e=>{const t=+e.dataset.value,o=e.dataset.prefix||"",n=e.dataset.suffix||"",i=performance.now(),r=s=>{const d=Math.min((s-i)/1200,1),a=Math.floor(d*t);e.textContent=`${o}${a}${n}`,d<1?requestAnimationFrame(r):e.textContent=`${o}${t}${n}`};requestAnimationFrame(r)})(e.target),t.unobserve(e.target))})},{threshold:.6});s.forEach(e=>d.observe(e)),window.addEventListener("load",()=>{const e=document.querySelector("#testimonials .testimonials-carousel.swiper");if(console.log("[swiper] el found:",!!e),console.log("[swiper] Swiper type:",typeof window.Swiper),!e)return;if(!window.Swiper)return void console.error("[swiper] Swiper n'est pas chargé. Vérifie le script CDN et l'ordre.");const t=new Swiper(e,{loop:!0,loopAdditionalSlides:8,slidesPerView:"auto",spaceBetween:24,allowTouchMove:!0,simulateTouch:!0,grabCursor:!0,speed:18e3,autoplay:{delay:0,disableOnInteraction:!1,pauseOnMouseEnter:!0,waitForTransition:!0},freeMode:{enabled:!0,momentum:!1,sticky:!1},watchSlidesProgress:!0});window.__swiper=t,console.log("[swiper] init ok:",t);const o=()=>{t.autoplay.start()};e.addEventListener("pointerdown",()=>{t.autoplay.stop()},{passive:!0}),e.addEventListener("pointerup",o,{passive:!0}),e.addEventListener("pointercancel",o,{passive:!0}),document.addEventListener("visibilitychange",()=>{document.hidden||t.autoplay.start()})})});