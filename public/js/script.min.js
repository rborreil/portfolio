document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".fixed-btn .fixed-mail"),t=document.querySelector(".fixed-btn .fixed-home"),n=document.querySelector(".floating-nav"),o=document.querySelector("#hero");function i(e){return e.getBoundingClientRect().top+window.pageYOffset}function r(){const r=window.pageYOffset,s=r+window.innerHeight,d=o?o.getBoundingClientRect().bottom+window.pageYOffset:300,a=document.querySelector("#contact"),c=document.querySelector("#footer"),l=!!a&&s>=i(a),u=!!c&&s>=i(c),w=r>d&&!u,p=r>d&&!l;e.classList.toggle("fixed-hidden",!p),t.classList.toggle("fixed-hidden",!w),n.classList.toggle("fixed-hidden",!w)}window.addEventListener("scroll",r),window.addEventListener("resize",r);const s=document.querySelectorAll(".number"),d=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&((e=>{const t=+e.dataset.value,n=e.dataset.prefix||"",o=e.dataset.suffix||"",i=performance.now(),r=s=>{const d=Math.min((s-i)/1200,1),a=Math.floor(d*t);e.textContent=`${n}${a}${o}`,d<1?requestAnimationFrame(r):e.textContent=`${n}${t}${o}`};requestAnimationFrame(r)})(e.target),t.unobserve(e.target))})},{threshold:.6});s.forEach(e=>d.observe(e)),window.addEventListener("load",()=>{const e=document.querySelector("#testimonials .testimonials-carousel.swiper");if(console.log("[swiper] el found:",!!e),console.log("[swiper] Swiper type:",typeof window.Swiper),!e)return;if(!window.Swiper)return void console.error("[swiper] Swiper n'est pas chargé. Vérifie le script CDN et l'ordre.");const t=new Swiper(e,{loop:!0,slidesPerView:"auto",spaceBetween:24,allowTouchMove:!0,simulateTouch:!0,grabCursor:!0,speed:18e3,autoplay:{delay:1,disableOnInteraction:!1,pauseOnMouseEnter:!0},freeMode:{enabled:!0,momentum:!1,sticky:!1},watchSlidesProgress:!0});window.__swiper=t,console.log("[swiper] init ok:",t);const n=()=>t.autoplay.start();e.addEventListener("pointerdown",()=>t.autoplay.stop(),{passive:!0}),e.addEventListener("pointerup",n,{passive:!0}),e.addEventListener("pointercancel",n,{passive:!0}),document.addEventListener("visibilitychange",()=>{document.hidden||t.autoplay.start()})})});